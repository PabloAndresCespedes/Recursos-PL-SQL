create or replace trigger func_empresa_antes
  before insert or delete
  on FUNCIONARIOS_EMPRESA 
  for each row
begin
  if inserting and :new.id is null then 
    :new.id := FUNCIONARIOS_EMPRESA_SEQ.NEXTVAL; 
  end if;
  
  if deleting then
    delete from asistencia a
    where a.id_func_emp = :old.id
    and   trunc(a.fecha_creado) >= sysdate;
  end if;
  
end func_empresa_antes;
/
